<!-- <p>daily-schedule works!</p> -->
<div class="downloads d-flex justify-content-end mr-4  mt-2 ml-5 mb-2 position-relative">
  <div>
    <!-- <i class="fas fa-file-download mx-3 f-18" (click)="exportexcel2()"></i> -->
    <i class="fas fa-filter mx-2 f-18"   (click)="openFilter(filtermodal)"></i>
  </div>

</div>
<div class="daily-stats-wrapper px-4 pb-3 pt-0 pl-5 position-relative">
  <div class="d-flex align-items-center">
    <span class="material-icons icon-tel" (click)="display=[true,false,false]" [tooltip]="sitecontent"
      tooltipPlacement="right">
      query_stats
      <ng-template #sitecontent>EVV Stats By Branch</ng-template>
    </span>
    <span class="material-icons icon-tel icon-tel-c" (click)="display=[false,false,true]" [tooltip]="sitecontent1"
      tooltipPlacement="right">
      fact_check
      <ng-template #sitecontent1>Branch Compliance Status</ng-template>
    </span>
    <span class="material-icons icon-tel icon-tel-d" (click)="display=[false,true,false]" [tooltip]="sitecontent2"
      tooltipPlacement="right">
      tty
      <ng-template #sitecontent2>Telephony by Caregiver</ng-template>
    </span>
  </div>
 <div *ngIf="display[0]" class=" prime-table">
  <p-table  [value]="telephonyByCareGiver" styleClass="p-datatable-striped" [paginator]="true" [rows]="100"
    [showCurrentPageReport]="true" currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
    [rowsPerPageOptions]="[10,25,50,100,200,300]">
    <ng-template pTemplate="header">
      <tr class="sticky-top">
        <th scope="col" class="">RVP</th>
        <th scope="col" class="">ED</th>
        <th scope="col" class="">Branch</th>
        <th scope="col" class="">DCS Home Site#</th>
        <th scope="col" class="">Site Name</th>
        <th scope="col" class=""> DCS Name</th>
        <th scope="col" class=""> Dcs Coordinator </th>
        <th scope="col" class=""> Enterprise Id</th>
        <th scope="col" class=""> Job Title</th>
        <th scope="col" class=""> Period</th>
        <th scope="col" class=""> Total Expected Punches</th>
        <th scope="col" class=""> Total Punches#</th>
        <th scope="col" class=""> Missing Punches</th>
        <th scope="col" class=""> Missing Punches Percent </th>
        <th scope="col" class=""> Telephony Landline Punches#</th>
        <th scope="col" class=""> Tel Landline Percent</th>
        <th scope="col" class=""> Telephony App Punches#</th>
        <th scope="col" class=""> Total Expected Punches</th>
        <th scope="col" class=""> Tel App Percent</th>
        <th scope="col" class="">Manual Punches#</th>
        <th scope="col" class=""> Tel Manual Percent </th>
        <th scope="col" class=""> Manual + missing</th>
        <th scope="col" class=""> EVV compliant</th>
        <th scope="col" class=""> Compliance Status </th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-item>
      <tr>

        <td>{{item.rvp}}</td>
        <td>{{item.ed}}</td>
        <td>{{item.branch}}</td>
        <td>{{item.dcsHomeSite}}</td>
        <td>{{item.siteName}}</td>
        <td>{{item.dcsName}}</td>
        <td>{{item.dcsCoordinator}}</td>
        <td>{{item.enterpriseId}}</td>
        <td>{{item.jobTitle}}</td>
        <td>{{item.period}}</td>
        <td>{{item.totalExpectedPunches}}</td>
        <td>{{item.totalPunches}}</td>
        <td>{{item.missingPunches}}</td>
        <td>{{item.missingPunchesPercent}}</td>
        <td>{{item.telephonyLandlinePunches}}</td>
        <td>{{item.telephonyLandlinePercent}}</td>
        <td>{{item.telephonyAppPunches}}</td>
        <td>{{item.totalExpectedPunches}}</td>
        <td>{{item.telephonyAppPercent}}</td>
        <td>{{item.manualPunches}}</td>
        <td>{{item.telephonyManualPercent}}</td>
        <td>{{item.manualPlusMissing}}</td>
        <td>{{item.evvCompliant}}</td>
        <td>{{item.complianceStatus}}</td>
      </tr>
      <tr *ngIf="telephonyByCareGiver?.length==0">NO Data Found</tr>
    </ng-template>
  </p-table>
  </div>
  <!-- evv  -->
  <div *ngIf="display[1]" class="  evv-stats table-stats-evv">
    <div class="table-responsive box-shadow">
      <table class="table " id='excel-table'>
        <thead class="thead-dark">
          <tr class="dark">
            <th colspan="2"></th>
            <th scope="col" class="sticky-top py-1 bg-dark">PERIOD - May</th>
            <th scope="col" class="sticky-top py-1 bg-dark" colspan="3">Values</th>
          </tr>
          <tr>
            <th scope="col" class="sticky-top py-1 bg-yellow border-0">Branch
            </th>
            <th scope="col" class="sticky-top py-1 bg-yellow border-0">DCS Coordinator
            </th>
            <th scope="col" class="sticky-top py-1 bg-yellow border-0">Manual %
            </th>
            <th scope="col" class="sticky-top py-1 bg-yellow border-0">Landline %
            </th>
            <th scope="col" class="sticky-top py-1 bg-yellow border-0">Mobile App %
            </th>
            <th scope="col" class="sticky-top py-1 bg-yellow border-0">Sum of Total EVV
            </th>
          </tr>
        </thead>
        <tbody>
          <tr class="bg-light-grey">
            <td colspan="2" class="py-1">BR: RCHC LA ALEXANDRIA
            </td>
            <td class="py-1">11.0%
            </td>
            <td class="py-1">0.0%
            </td>
            <td class="py-1"> 89.0%
            </td>
            <td class="py-1">89.0%
            </td>
          </tr>
          <tr>
            <td class="py-1">
            </td>
            <td class="py-1">Stanley, Kayla
            </td>
            <td class="py-1">0.0%
            </td>
            <td class="py-1">0.0%
            </td>
            <td class="py-1"> 89.0%
            </td>
            <td class="py-1">89.0%
            </td>
          </tr>
          <tr>
            <td class="py-1">
            </td>
            <td class="py-1">Stanley, Kayla
            </td>
            <td class="py-1">0.0%
            </td>
            <td class="py-1">0.0%
            </td>
            <td class="py-1"> 89.0%
            </td>
            <td class="py-1">89.0%
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- compliance  -->
  <div *ngIf="false" class="table-stats-evv evv-stats">
    <div class="table-responsive box-shadow">
      <table class="table " id='excel-table'>
        <thead class="thead-dark">
          <tr class="dark">

            <th scope="col" class="sticky-top py-1">Count of Employees</th>
            <th scope="col" class="sticky-top py-1" colspan="3">Column Labels</th>
          </tr>
          <tr>
            <th scope="col" class="sticky-top py-1 bg-yellow border-0">Row Labels
            </th>
            <th scope="col" class="sticky-top py-1 bg-yellow border-0">Compliant
            </th>
            <th scope="col" class="sticky-top py-1 bg-yellow border-0">Partial Compliance,<br> but below threshold
            </th>
            <th scope="col" class="sticky-top py-1 bg-yellow border-0">Non Compliant
            </th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="py-1">Stanley, Kayla
            </td>
            <td class="py-1">0.0%
            </td>
            <td class="py-1">0.0%
            </td>
            <td class="py-1"> 89.0%
            </td>

          </tr>

        </tbody>
      </table>
    </div>
  </div>
  <div class="pivot-table" *ngIf="display[2]">
    <db-angular-pivot-table [source]="telephonyByCareGiver" [configs]='configs'></db-angular-pivot-table>
  </div>
  <div class="pivot-table" *ngIf="display[1]">
    <db-angular-pivot-table [source]="telephonyByCareGiver" [configs]='configs2'></db-angular-pivot-table>
  </div>

  <div *ngIf="false" class="pager d-flex justify-content-end mt-2">
    <div class="c">
      <span class="mr-2">Per page</span>
      <select class="border-0 mr-2">
        <option>5</option>
        <option>10</option>
        <option>15</option>
        <option>20</option>
      </select>
      <span class="mr-2">Showing 10 to
        100 of
        200
      </span>
      <button type="button" class="btn-common-small mx-2">Prev</button>
      <button type="button" class="btn-common-small mx-2">Next</button>
    </div>
  </div>
</div>








<!-- filter modal -->
 <ng-template #filtermodal>
<div class="modal-header bg-dark">
    <h5 class="modal-title text-white" id="exampleModalLabel">
      Evv Filter
    </h5>
    <button type="button" class="close" (click)="modelRef.hide()" aria-label="Close">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <div class="row measures-wrapper">
      <div class="col-md-6  mb-3 ">
        <div class="card-header d-flex justify-content-between align-items-center box-shadow">
          <h5 class="m-0">Job Run Date <span class="text-danger">*</span></h5>
          <input class="form-control bg-light-grey" [(ngModel)]="jobRunDate" style="width: auto" type="text" bsDatepicker
            placeholder="MM/DD/YYYY" />
        </div>
      </div>
    </div>
    <div class="row measures-wrapper">
      <div class="col-md-6">
        <div class="card bg-light mb-3 box-shadow">
          <div class="card-header d-flex justify-content-between align-items-center">
            <h5 class="m-0">Select RVP's </h5>
            <div class="d-flex mr-3 align-items-center" style="width: 55%">
              <label class="site-label color-black">

              </label>
              <div class="input-group">
                <div class="procedurecode w-100 multiselect-angular">

                  <p-multiSelect [options]="rvpList" (onPanelHide)="getEDList()" [(ngModel)]="selectedRvpList"
                     optionLabel="operationOfficerName"
                    selectedItemsLabel="{0} items selected" class="multiselect-custom"></p-multiSelect>

                </div>
              </div>
            </div>
          </div>
          <div class="card-body filter-card-body">
            <p class="card-text">
              <li *ngFor="let item of selectedRvpList">{{item.operationOfficerName}}</li>
            </p>
          </div>
        </div>
      </div>
      <div class="col-md-6">
        <div class="card bg-light mb-3 box-shadow">
          <div class="card-header d-flex justify-content-between align-items-center">
            <h5 class="m-0">Select ED's </h5>
            <div class="d-flex mr-3 align-items-center" style="width: 55%">
              <label class="site-label color-black">

              </label>
              <div class="input-group">
                <div class="procedurecode w-100 multiselect-angular">
                  <p-multiSelect [options]="edsList" (onPanelHide)="getBMList()" [(ngModel)]="selectedEdList" maxSelectedLabels="1"
                     optionLabel="executiveDirectorName" [panelStyle]="{ minWidth: '15em' }" [itemSize]="30"
                    selectedItemsLabel="{0} items selected" [virtualScroll]="true" class="multiselect-custom">
                  </p-multiSelect>

                </div>
              </div>
            </div>
          </div>
          <div class="card-body filter-card-body">
            <p class="card-text">
              <li *ngFor="let  item of selectedEdList">{{item.executiveDirectorName}}</li>

            </p>
          </div>
        </div>
      </div>
    </div>
    <div class="row measures-wrapper">
      <div class="col-md-6">
        <div class="card bg-light mb-3 box-shadow">
          <div class="card-header d-flex justify-content-between align-items-center">
            <h5 class="m-0">Select Branches </h5>
            <div class="d-flex mr-3 align-items-center" style="width: 55%">
              <label class="site-label color-black">

              </label>
              <div class="input-group">
                <div class="procedurecode w-100 multiselect-angular">
                  <p-multiSelect [options]="bmList" class="multiselect-custom"  (onPanelHide)="getSiteList()" [(ngModel)]="selectedBranches" maxSelectedLabels="1"  optionLabel="branchManagerName" selectedItemsLabel="{0} items selected"></p-multiSelect>

                </div>
              </div>
            </div>
          </div>
          <div class="card-body filter-card-body">
            <p class="card-text">
              <li *ngFor="let item of selectedBranches">{{item.branchManagerName}}</li>
            </p>
          </div>
        </div>
      </div>
      <div class="col-md-6">
        <div class="card bg-light mb-3 box-shadow">
          <div class="card-header d-flex justify-content-between align-items-center">
            <h5 class="m-0">Select Sites</h5>
            <div class="d-flex mr-3 align-items-center" style="width: 55%">
              <label class="site-label color-black">

              </label>
              <div class="input-group">
                <div class="procedurecode w-100 multiselect-angular">
                  <p-multiSelect [dataKey]="'siteId'"  [options]="siteList"     [panelStyle]="{ minWidth: '15em' }" [itemSize]="30"
                  class="multiselect-custom" [virtualScroll]="true"  [(ngModel)]="selectedSites" maxSelectedLabels="1"  optionLabel="siteName" selectedItemsLabel="{0} items selected"></p-multiSelect>

                </div>
              </div>
            </div>
          </div>
          <div class="card-body filter-card-body">
            <p class="card-text">
              <li *ngFor="let  item of selectedSites">{{item.siteName}}</li>
            </p>
          </div>
        </div>
      </div>
    </div>
    <div class="d-flex justify-content-between align-items-center">
      <button type="button"  (click)="modelRef.hide()"  class="btn btn-primary mx-2 px-3 border-radius-curved py-2"><i
          class="fas fa-times mr-1"></i>Close</button>
      <button type="button" (click)="onApply()" class="btn btn-success mx-2 px-3 border-radius-curved py-2"><i
          class="fas fa-check mr-1" ></i>Apply</button>
    </div>
  </div>
</ng-template>
