<!-- <p>daily-schedule works!</p> -->

<div class="downloads d-flex justify-content-between mr-4  mt-2 ml-4 position-relative">
  <div class="d-flex align-items-center">
<h4 class="mb-0 AvenirLTStd-Heavy">Job Run Date :</h4>
<h5 class="mb-0 AvenirLTStd-Heavy ml-2">{{applyjobDate|date:'MM/dd/yyyy'}}</h5>
<span class="material-icons ml-2" [tooltip]="sitecontent1" tooltipPlacement="right">
  help
  <ng-template #sitecontent1>This report has the updated data as of {{applyjobDate|date:'MM/dd/yyyy'}}
  </ng-template>
</span>
  </div>

  <div>
    <i class="fas fa-file-download mx-3 f-18"></i>
    <i class="fas fa-filter mx-2 f-18"  (click)="openFilter(filtermodal)" ></i>
  </div>

</div>
<div class="daily-stats-wrapper px-4">
    <div class="table-responsive box-shadow">
      <table class="table mb-0" id='excel-table' >
        <thead class="thead-dark">
          <tr class="sticky-top">
            <th scope="col">RVP</th>
            <th scope="col">ED</th>
            <th scope="col">Branch</th>
            <th scope="col">Site#</th>
            <th scope="col">Site Name</th>
            <th scope="col"> PS</th>
            <th scope="col"> MRN </th>
            <th scope="col"> Payor<br> Plan</th>
            <th scope="col"> Fiscal Period<br> Number</th>
            <th scope="col"> Scheduled Begin<br> Date Time </th>
            <th scope="col"> Scheduled End<br> Date Time </th>
            <th scope="col"> Fiscal Day<br> Name </th>
            <th scope="col"> SCH <br> Hours</th>
            <th scope="col"> Revenue<br> Status </th>
          </tr>
        </thead>
        <tbody>
           <tr *ngFor="let item of  scheduledHoursList">
            <td scope="row" >{{item.rvp}}</td>
            <td>{{item.ed}}</td>
            <td>{{item.branch}}</td>
            <td>{{item.site}}</td>
            <td>{{item.siteName}} </td>
            <td>{{item.ps}}</td>
            <td>{{item.mrn}}</td>
            <td>{{item.payorPlan}}</td>
            <td>{{item.fiscalPeriodNumber}}</td>
            <td>{{item.scheduledBeginDateTime}}</td>
            <td>{{item.scheduledEndDateTime}}</td>
            <td>{{item.fiscalDayName}}</td>
            <td>{{item.scheduledHours}}</td>
            <td>{{item.revenueStatus}}</td>
            </tr>
        </tbody>

      </table>
      <p *ngIf="scheduledHoursList.length==0" class="no-records text-center">No Records Found</p>
    </div>
    <div class="pager d-flex justify-content-end mt-2">
        <div class="c">
          <span class="mr-2">Per page</span>
          <select (change)="perpageChange()" [(ngModel)]="perpage" class="border-0 mr-2">
            <option [ngValue]="10"  >10</option>
            <option [ngValue]="20" >20</option>
            <option [ngValue]="30" >30</option>
            <option [ngValue]="40" >40</option>
            <option [ngValue]="50" >50</option>
            <!-- <option [ngValue]="100" >100</option> -->



          </select>
          <span class="mr-2">Showing {{ totalRecordsCount!=0?lowerBound:0}}to
          {{upperBound>totalRecordsCount?totalRecordsCount:upperBound}} of
            {{totalRecordsCount}}
          </span>

          <button [disabled]="lowerBound==1" (click)="prevPage()" type="button" class="btn-common-small mx-2"  >Prev</button>
          <button [disabled]="upperBound>totalRecordsCount" (click)="nextPage()" type="button" class="btn-common-small mx-2"
           >Next</button>
        </div>
      </div>
  </div>


  <ng-template #filtermodal>
    <div class="modal-header bg-dark">
        <h5 class="modal-title text-white" id="exampleModalLabel">
          Evv Filter
        </h5>
        <button type="button" class="close" (click)="modelRef.hide()" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="row measures-wrapper">
          <div class="col-md-6  mb-3 ">
            <div class="card-header d-flex justify-content-between align-items-center box-shadow">
              <h5 class="m-0">Job Run Date <span class="text-danger">*</span></h5>
              <input class="form-control bg-light-grey" [(ngModel)]="jobRunDate" style="width: auto" type="text" bsDatepicker
                placeholder="MM/DD/YYYY" />
            </div>
          </div>
        </div>
        <div class="row measures-wrapper">
          <div class="col-md-6">
            <div class="card bg-light mb-3 box-shadow">
              <div class="card-header d-flex justify-content-between align-items-center">
                <h5 class="m-0">Select RVP's </h5>
                <div class="d-flex mr-3 align-items-center" style="width: 55%">
                  <label class="site-label color-black">

                  </label>
                  <div class="input-group">
                    <div class="procedurecode w-100 multiselect-angular">

                      <p-multiSelect [options]="rvpList" (onPanelHide)="getEDList()" [(ngModel)]="selectedRvpList"
                         optionLabel="operationOfficerName"
                        selectedItemsLabel="{0} items selected" class="multiselect-custom"></p-multiSelect>

                    </div>
                  </div>
                </div>
              </div>
              <div class="card-body filter-card-body">
                <p class="card-text">
                  <li *ngFor="let item of selectedRvpList">{{item.operationOfficerName}}</li>
                </p>
              </div>
            </div>
          </div>
          <div class="col-md-6">
            <div class="card bg-light mb-3 box-shadow">
              <div class="card-header d-flex justify-content-between align-items-center">
                <h5 class="m-0">Select ED's </h5>
                <div class="d-flex mr-3 align-items-center" style="width: 55%">
                  <label class="site-label color-black">

                  </label>
                  <div class="input-group">
                    <div class="procedurecode w-100 multiselect-angular">
                      <p-multiSelect [options]="edsList" (onPanelHide)="getBMList()" [(ngModel)]="selectedEdList" maxSelectedLabels="1"
                         optionLabel="executiveDirectorName" [panelStyle]="{ minWidth: '15em' }" [itemSize]="30"
                        selectedItemsLabel="{0} items selected" [virtualScroll]="true" class="multiselect-custom">
                      </p-multiSelect>

                    </div>
                  </div>
                </div>
              </div>
              <div class="card-body filter-card-body">
                <p class="card-text">
                  <li *ngFor="let  item of selectedEdList">{{item.executiveDirectorName}}</li>

                </p>
              </div>
            </div>
          </div>
        </div>
        <div class="row measures-wrapper">
          <div class="col-md-6">
            <div class="card bg-light mb-3 box-shadow">
              <div class="card-header d-flex justify-content-between align-items-center">
                <h5 class="m-0">Select Branches </h5>
                <div class="d-flex mr-3 align-items-center" style="width: 55%">
                  <label class="site-label color-black">

                  </label>
                  <div class="input-group">
                    <div class="procedurecode w-100 multiselect-angular">
                      <p-multiSelect [options]="bmList" class="multiselect-custom"  (onPanelHide)="getSiteList()" [(ngModel)]="selectedBranches" maxSelectedLabels="1"  optionLabel="branchManagerName" selectedItemsLabel="{0} items selected"></p-multiSelect>

                    </div>
                  </div>
                </div>
              </div>
              <div class="card-body filter-card-body">
                <p class="card-text">
                  <li *ngFor="let item of selectedBranches">{{item.branchManagerName}}</li>
                </p>
              </div>
            </div>
          </div>
          <div class="col-md-6">
            <div class="card bg-light mb-3 box-shadow">
              <div class="card-header d-flex justify-content-between align-items-center">
                <h5 class="m-0">Select Sites</h5>
                <div class="d-flex mr-3 align-items-center" style="width: 55%">
                  <label class="site-label color-black">

                  </label>
                  <div class="input-group">
                    <div class="procedurecode w-100 multiselect-angular">
                      <p-multiSelect [dataKey]="'siteId'"  [options]="siteList"     [panelStyle]="{ minWidth: '15em' }" [itemSize]="30"
                      class="multiselect-custom" [virtualScroll]="true"  [(ngModel)]="selectedSites" maxSelectedLabels="1"  optionLabel="siteName" selectedItemsLabel="{0} items selected"></p-multiSelect>

                    </div>
                  </div>
                </div>
              </div>
              <div class="card-body filter-card-body">
                <p class="card-text">
                  <li *ngFor="let  item of selectedSites">{{item.siteName}}</li>
                </p>
              </div>
            </div>
          </div>
        </div>
        <div class="d-flex justify-content-between align-items-center">
          <button type="button"  (click)="modelRef.hide()"  class="btn btn-primary mx-2 px-3 border-radius-curved py-2"><i
              class="fas fa-times mr-1"></i>Close</button>
          <button type="button" (click)="onApply()" class="btn btn-success mx-2 px-3 border-radius-curved py-2"><i
              class="fas fa-check mr-1" ></i>Apply</button>
        </div>
      </div>
    </ng-template>
